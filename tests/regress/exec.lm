
import LIB/default.lm;

main := Î». (: (
   # TODO Fork, call exec in child
   # TODO Wait for child to exit
   (print 'A\n_s)
   (let tmp (as (mktemp(as (clone-rope(SAtom '/tmp/lm.tmp.XXXXXX_s)) U8[])) U8[]))
   (print 'B\n_s)
   (print(as tmp String))
   (let argv (const-cons(
       (as 'cpp_s U8[])
       (as '-include_s U8[])
       (as 'stdio.h_s U8[])
       (as '/dev/null_s U8[])
       (as '-o_s U8[])
       (as tmp U8[])
   )))
   (print(read-file(as tmp String)))
   ()
) Nil);
